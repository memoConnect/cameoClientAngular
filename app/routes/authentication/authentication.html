
<section ng-controller="AuthenticationCtrl">
    <cm-header cm-rubber-space>
        <cm-back cm-weight="1" back-to="/settings"></cm-back>
        <cm-identity cm-weight="6"></cm-identity>
        <cm-menu cm-weight="1"></cm-menu>
    </cm-header>

    <section class = "theme-a">

        <h2>
            <i class = "fa cm-key"></i>
            {{"AUTHENTICATION.HEADING" | cmTranslate}}
        </h2>

        <!-- status -->

        <article>
            <div class= "authentication-status" ng-click = "step = ((step||0)+1)%4">
                <i class= "fa cm-key-request"   ng-class="{'active': step > 0}"></i>
                <i class= "fa cm-key-response"  ng-class="{'active': step > 2}"></i>
                <i class= "fa cm-handshake"     ng-class="{'active': step > 4}"></i>
            </div>
            <div class= "space-for-loader">
                <cm-loader ng-show = "waiting" type="balls"></cm-loader>
            </div>
        <article>

        <hr/>

        <h3>
            {{"AUTHENTICATION.HEADING" | cmTranslate}}
        </h3>

        <article>
            <cm-info-bubble nose-x = "60%">
                {{"AUTHENTICATION.EXPLANATION" | cmTranslate}}

                <br/>
                <br/>

                <strong>
                    {{"AUTHENTICATION.INSTRUCTIONS" | cmTranslate}}
                </strong>
            </cm-info-bubble>
        </article>

        <hr/>

        <article>
            <strong>
                {{"AUTHENTICATION.NOTE" | cmTranslate}}
            </string>
        </article>

        <article>
            {{transactionSecret}}
        </article>

    <section>


    <cm-footer cm-always-on-top ng-if       = "step == 0">

        <button 
            ng-click    = "requestKey()" 
            class       = "cm-btn-block cm-btn-grey" 
            data-qa     = "btn-start-authentication"
        >
            {{'AUTHENTICATION.KEY_REQUEST.START'|cmTranslate}}
            <i class="fa cm-handshake cm-lg-icon"></i>
        </button>

    </cm-footer>

    <cm-footer cm-always-on-top ng-if       = "step == 1">

        <button 
            ng-click    = "cancelKeyRequest()" 
            class       = "cm-btn-block cm-btn-grey" 
            data-qa     = "btn-start-authentication"
        >
            {{'AUTHENTICATION.KEY_REQUEST.CANCEL'|cmTranslate}}
            <i class="fa cm-handshake cm-lg-icon"></i>
        </button>

    </cm-footer>

    <cm-footer cm-always-on-top ng-if       = "step == 2">

        <button 
            ng-click    = "startAuthenticationRequest()" 
            class       = "cm-btn-block cm-btn-grey" 
            data-qa     = "btn-start-authentication"
        >
            {{'AUTHENTICATION.AUTHENTICATION.START'|cmTranslate}}
            <i class="fa cm-handshake cm-lg-icon"></i>
        </button>
        
    </cm-footer>

</section>


