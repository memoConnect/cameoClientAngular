<header class="inScreen">
    <i class="fa cm-key cm-lg-icon"></i> {{'SETTINGS.PAGES.IDENTITY.KEYS.HEADER' | cmTranslate}}
</header>

<ul>
    <li>
        <a href="#/settings/identity/keys/create" class="item w50" data-qa="btn-create-key">
            <i class="fa cm-checkbox-add icon-left cm-lg-icon"></i>
            <span>{{'SETTINGS.PAGES.IDENTITY.KEYS.CREATE'|cmTranslate}}</span>
        </a>
        <a cm-href="#/settings/identity/keys/import" class="item w50 cm-disabled">
            <i class="fa cm-fix icon-left cm-lg-icon"></i>
            <span>{{'SETTINGS.PAGES.IDENTITY.KEYS.IMPORT'|cmTranslate}}</span>
        </a>
    </li>
    <li ng-repeat="key in ownKeys | orderBy:'getPrivateKey()':false" data-qa="key-list-item">
        <span class="item clearfix">
            <strong>{{key.getSize()}}</strong>
            <strong class="isInLocalstorage" ng-if="key.getPrivateKey()" data-qa="key-is-local"> {{'SETTINGS.PAGES.IDENTITY.KEYS.KEY_ON_THIS_DEVICE'|cmTranslate}}</strong>
            {{key.name}}<br />
            {{key.created | date:'dd.MM.yy - HH:mm'}}
        </span>
        <div class="shortLinks">
            <i class="fa cm-clipboard" ng-click="openModal('modalExportKeyPair',key)"></i>
            <i class="fa cm-checkbox-wrong" ng-click="openModal('modalRemoveKeypair',key)" data-qa="btn-remove-modal"></i>
        </div>
    </li>
</ul>

<cm-modal id="modalExportKeyPair" class="no-padding" cm-data-as="key" cm-title="SETTINGS.PAGES.IDENTITY.KEYS.EXPORT_KEY">
    <div class="modal-row">
        <h3>{{key.name}} - {{key.getSize()}}</h3>
        <div ng-if="key.getPrivateKey()">
            <h3>{{'SETTINGS.PAGES.IDENTITY.KEYS.PRIVATE_KEY'|cmTranslate}}</h3>
            <textarea class="form-control" cm-clipboard>{{key.getPrivateKey()}}</textarea>
        </div>
        <h3>{{'SETTINGS.PAGES.IDENTITY.KEYS.PUBLIC_KEY'|cmTranslate}}</h3>
        <textarea class="form-control" cm-clipboard>{{key.getPublicKey()}}</textarea>
    </div>
</cm-modal>

<cm-modal id="modalRemoveKeypair" class="no-padding" cm-data-as="key" cm-title="SETTINGS.PAGES.IDENTITY.KEYS.REMOVE_KEY">
    <div class="modal-row">
        <h3>{{key.name}} - {{key.getSize()}} - {{key.created | date:'dd.MM.yy - HH:mm'}}</h3>
    </div>
    <button class="cm-btn-block cm-btn-grey" ng-click="remove(key)" data-qa="btn-remove-key">
        {{'SETTINGS.PAGES.IDENTITY.KEYS.REMOVE_KEY_REALLY'|cmTranslate}}
        <i class="fa cm-checker cm-lg-icon"></i>
    </button>
</cm-modal>