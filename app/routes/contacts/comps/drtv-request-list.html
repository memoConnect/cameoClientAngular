<header class="inScreen">
    <i class="fa cm-contacts cm-lg-icon"></i> {{'CONTACTS.HEADING.REQUESTS'|cmTranslate}}
</header>

<div ng-show="isLoading" class="empty-list">
    <cm-spinner></cm-spinner>
</div>

<div ng-show="!requests.length && !isLoading" class="empty-list">
    <i class="fa cm-info"></i> {{'CONTACTS.INFO.NO_REQUESTS'|cmTranslate}}
</div>

<cm-contact-tag ng-repeat="request in requests" ng-class="{'is-new':request.state == undefined,'message-open':request.isOpen, 'show-bar':request.showBar}">
    <section cm-rubber-space>
        <cm-avatar cm-data="request.identity"></cm-avatar>
        <div class="cm-request-brief" cm-weight="1" ng-click="toggleBrief(request)" ng-class="{'with-message':request.message != '','message-close':!request.isOpen}">
            <strong>{{request.identity.getDisplayName()}}</strong><br />
            {{request.message}}
        </div>
        <button ng-click="toggleBar(request)" data-qa="btn-toggleBar">
            <i class="fa cm-checkbox"></i>
        </button>
    </section>
    <section class="cm-request-bar" ng-show="request.showBar">
        <button ng-click="acceptRequest(request)" data-qa="btn-acceptRequest"><i class="fa cm-checkbox-right">{{'CONTACTS.REQUESTS.ACCEPT'|cmTranslate}}</i></button>
        <button ng-click="rejectRequest(request)" data-qa="btn-rejectRequest"><i class="fa cm-reject">{{'CONTACTS.REQUESTS.REJECT'|cmTranslate}}</i></button>
        <button ng-click="ignoreRequest(request)"><i class="fa cm-ignore">{{'CONTACTS.REQUESTS.IGNORE'|cmTranslate}}</i></button>
    </section>
</cm-contact-tag>