<cm-header cm-rubber-space>
    <cm-back     cm-weight="1" back-to="/talks"></cm-back>
    <cm-identity cm-weight="10"></cm-identity>
    <cm-logo     cm-weight="8"></cm-logo>
    <cm-reload   cm-weight="8"></cm-reload>
    <cm-menu     cm-weight="2"></cm-menu>
</cm-header>

<section ng-controller="ContactsCtrl">

    <header>
        <h1>{{"CONTACTS.HEADING"|cmTranslate}}</h1>       

        <button ng-click="openAddModal()" cm-edge>
            <i class="fa cm-edge-add"></i>
        </button>

        <input 
            type            = "text" 
            value           = "" 
            ng-model        = "search" 
            cm-icon         = "cm-search"
            cm-large-input
        />     

    </header>

    <cm-contacts-filter-controls
        sort-by     = ""
        filter-by   = ""
    >
    </cm-contacts-filter-controls>
    

    <cm-contacts-list contacts-as="contacts">
        <div ng-show="isLoading" class="empty-list">
            <cm-spinner ></cm-spinner>
        </div>

        <div ng-show="!contacts.length && !isLoading" class="empty-list">
            <i class="fa cm-info"></i> {{"CONTACTS.LIST_EMPTY"|cmTranslate}}
        </div>

        <cm-contact-tag cm-rubber-space ng-repeat="contact in contacts | filter:search">
            <cm-avatar          cm-data = "contact.identity"        ng-click="editContact(contact.id)"></cm-avatar>
            <cm-key-level key-size="contact.identity.getWeakestKeySize()"></cm-key-level>
            <cm-contact-brief   cm-data = "contact" cm-weight="1"   ng-click="editContact(contact)"></cm-contact-brief>
            <cm-contact-type    cm-data = "contact"></cm-contact-type>
            <span class="separator" ></span>
            <button ng-click="startConversation(contact)">
                <i class="fa cm-write"></i>
            </button>
        </cm-contact-tag>

    </cm-contacts-list>
    

    <!--old friend request-->
    <div style="background:white;margin-top:1em;padding:1em">
        <div cm-nav-tabs></div>
        <br >

        <div ng-if="activeTab == 'ADD'">
            <div cm-search-cameo-identity></div>

            <div cm-add-external-contact ng-hide="true"></div>
        </div>

        <div cm-contact-request-list ng-if="activeTab == 'REQUESTS'"></div>
    </div>
</section>

<cm-footer cm-rubber-space></cm-footer>