<section>
	<div class="cm-tools">		
		<i
			class	 = "fa fa-plus-square" 			
			style	 = "cursor:pointer"
			ng-click = "show_contacts = !show_contacts"
			ng-hide	 = "show_contacts"
		>
		</i>

		<i
			class	 = "fa fa-minus-square" 			
			style	 = "cursor:pointer"
			ng-click = "show_contacts = !show_contacts"
			ng-show	 = "show_contacts"
		>
		</i>

		{{'CONVERSATION.TAG.RECIPIENTS' |cmTranslate}}:

		<span ng-repeat = "recipient in conversation.recipients">
			{{recipient.displayName}}
			<i
				class		= "fa fa-times-circle"
				style		= "cursor:pointer"
				ng-click	= "recipient.removeFrom(conversation)"
			>
			</i> 
			{{$last? '' : ','}}
		</span> 				

		<!-- should be a modal here!-->
		<cm-contacts-list ng-show ="show_contacts"></cm-contacts-list>

	</div>

	<div>
		<input type ="text" ng-model="passphrase" cm-passphrase>

		<i
			class	 =	"fa fa-key"
			style	 =	"cursor: pointer"
			ng-click =	"generatePassphrase()"
		>
		</i>				

		<br/>

		<i
			class	 =	"fa fa-th-large"
			style	 =	"cursor: pointer"
			ng-click =	"show_captcha = !show_captcha"
		>
		</i>		
		<br/>
		
		<div ng-show="show_captcha">
			<cm-captcha ></cm-captcha>
			<i class="fa fa-refresh" style ="cursor:pointer" ng-click="refreshCaptcha()"></i>
		</div>

	</div>

	<div class="cm-messages">
		<!-- performance ?? -->
		{{'CONVERSATION.TAG.MESSAGES' |cmTranslate}}:
		<cm-message 
			ng-repeat		= "message in conversation.messages"
			cm-data 		= "message" 
		></cm-message>
	</div>
	<div>
		<textarea cm-message-input ng-model="my_message_text"></textarea>
	</div>
	<div class="cm-tools">
		Security:
		<cm-security></cm-security>
		<cm-captcha></cm-captcha>
	</div>
	<div>
		<cm-upload></cm-upload>
		<button ng-click="sendMessage()">{{"CONVERSATION.LABEL.SEND" | cmTranslate}}</button>
		<cm-emoticons></cm-emoticons>
	</div>
</section>