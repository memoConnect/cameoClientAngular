<header>
    <div class="left">
        <i class="fa"></i> {{conversation.subject || '(no subject)'}}
    </div>

    <div class="right">
        <cm-safety-level level ="3"></cm-safety-level>
        <cm-recipient-counter ng-click = "$emit('cmOverlay:show', 'add-recipients')">
            {{conversation.recipients.length}}
        </cm-recipient-counter>    
        <i class="fa cm-add"></i>
        <i class="fa cm-down fa-2x" ng-click="show_recipients = !show_recipients"></i>
    </div>
</header>
<div ng-show ="show_recipients">
    <cm-avatar cm-data ="recipient" ng-repeat="recipient in conversation.recipients"></cm-avatar>   
</div>

<cm-overlay id ="add-recipients">
    <div ng-click="$emit('cmOverlay:hide', 'add-recipients')">hide</div>
    <cm-contacts-list contacts-as="contact">
        <cm-contact-tag cm-data="contact" ng-click= "selectContact(contact.identity); selected = true">
            <span class="separator"></span>
            <i class="fa fa-3x" ng-class ="{'cm-checkbox': !selected, 'cm-checkbox-right': selected}" ng-click="editContact(contact.identity.id)"></i>
        </cm-contact-tag>
    </cm-contacts-list>
</cm-overlay>
