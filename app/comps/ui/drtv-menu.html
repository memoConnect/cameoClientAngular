<div class="cm-handler" ng-click="handleMenu()">
    <cm-notify-signal></cm-notify-signal>
    <i class="fa cm-menu-right-close" ng-class="{'cm-menu-right-open':menuVisible}"></i>
</div>
<div class="cm-menu-layer" ng-show="menuVisible">
    <div cm-transparent-bg ng-click="handleMenu()"></div>
    <div class="cm-menu-list">
        <ul class="list-group">
            <li class="cm-nose-wrapper" ng-click="handleMenu()">
                <i class="fa cm-nose-up"></i>
            </li>

            <li class="cm-list-group-item {{menu[btn].css}}" ng-repeat="btn in Object.keys(menu)" ng-class="{'has-submenu':menu[btn].subs}">
                <div ng-click="goTo(menu[btn], btn)">
                    <i class="fa icon-left" ng-if="menu[btn].icon != undefined" ng-class="menu[btn].icon"></i>
                    <span>
                        {{menu[btn].i18n|cmTranslate}}
                        <cm-friend-request-counter ng-if="menu[btn].drtv != undefined && menu[btn].drtv == 'cm-friend-request-counter'"></cm-friend-request-counter>
                    </span>
                </div>
                <i class="fa icon-right" ng-if="menu[btn].subs" ng-class="{'cm-down':!menu[btn].subsVisible,'cm-up':menu[btn].subsVisible}" ng-click="toggleSubs(menu[btn])"></i>
                <div class="clearfix"></div>
                <ul class="cm-submenu" ng-if="menu[btn].subs" ng-show="menu[btn].subsVisible">
                    <li ng-repeat="subBtn in Object.keys(menu[btn].subs)" ng-click="goTo(menu[btn], btn+'/'+subBtn, true)">
                        <i class="fa icon-left" ng-if="menu[btn].subs[subBtn].icon != undefined" ng-class="menu[btn].subs[subBtn].icon"></i>
                        <span>{{menu[btn].subs[subBtn].i18n|cmTranslate}}</span>
                        <div class="clearfix"></div>
                    </li>
                </ul>
            </li>

            <li class="cm-list-group-item" ng-click="logout()" data-qa="logout-btn">
                <i class="fa cm-logout icon-left"></i>
                <a class="logout">{{'MENU.LOGOUT'|cmTranslate}}</a>
                <div class="clearfix"></div>
            </li>
        </ul>
        <div class="bottom-filler"></div>
    </div>
</div>