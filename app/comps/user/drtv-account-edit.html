<article class="content">
    <cm-info-bubble class="cm-alert">
        <i class="fa cm-info cm-ci-color"></i> {{'ACCOUNT.INFO.NOTE_ABOUT_THIS_DATA'|cmTranslate}}
    </cm-info-bubble>
</article>

<hr class="margin-small" />

<form name="cmForm" novalidate autocomplete="off">

    <article class="content" ng-click="toggleReadOnly()">
        <label>{{'ACCOUNT.PLACEHOLDER.LOGINNAME'|cmTranslate}}</label>
        <div class="cm-input-ctn cm-input-readonly">
            <input
                    tabindex="1" data-qa="input-loginName" disabled
                    type="text" name="loginName" ng-model="account.loginName" />
        </div>
        <cm-info-bubble class="cm-alert" ng-show="showReadOnly">
            <i class="fa cm-info cm-ci-color"></i> {{'ACCOUNT.INFO.LOGINAME'|cmTranslate}}
        </cm-info-bubble>
    </article>

    <hr class="margin-small" />

    <label class="content">{{'ACCOUNT.PLACEHOLDER.PHONENUMBER'|cmTranslate}}</label>
    <cm-multi-input cm-collection="account.phoneNumbers" class="content">
        <ng-form name="formPhone">
            <div class="cm-input-ctn with-chooser">
                <input
                    tabindex="2" data-qa="input-phoneNumber"
                    type="text" name="phoneNumber" ng-model="item.value" cm-validate-phone cm-adaptive-change />
            </div>
            <!--<div cm-type-chooser cm-choose-value-to="item"></div>-->
            <cm-info-bubble class="cm-alert" ng-show="formPhone.phoneNumber.$dirty && formPhone.phoneNumber.$invalid">
                <div ng-show="formPhone.phoneNumber.$invalid" data-qa="form-error-phoneNumber-invalid">
                    <i class="fa cm-info"></i> {{'ACCOUNT.INFO.INVALID.PHONENUMBER'|cmTranslate}}
                </div>
            </cm-info-bubble>
        </ng-form>
    </cm-multi-input>

    <hr class="margin-small" />

    <label class="content">{{'ACCOUNT.PLACEHOLDER.EMAIL'|cmTranslate}}</label>
    <cm-multi-input cm-collection="account.emails" class="content">
        <ng-form name="formEmail">
            <div class="cm-input-ctn with-chooser">
                <input
                    tabindex="3" data-qa="input-email"
                    name="email" ng-model="item.value" cm-validate-email cm-adaptive-change />
            </div>
            <!--<div cm-type-chooser cm-choose-value-to="item"></div>-->
            <cm-info-bubble class="cm-alert" ng-show="formEmail.email.$dirty && formEmail.email.$invalid">
                <div ng-show="formEmail.email.$invalid" data-qa="form-error-email-invalid">
                    <i class="fa cm-info"></i> {{'ACCOUNT.INFO.INVALID.EMAIL'|cmTranslate}}
                </div>
            </cm-info-bubble>
        </ng-form>
    </cm-multi-input>

    <ul class="border-top border-bottom">
        <li class="no-border">
            <span class="item" ng-click="togglePasswordChange()" data-qa="btn-passwordChange" >
            {{'ACCOUNT.PLACEHOLDER.PASSWORD_CHANGE'|cmTranslate}}
            </span>
            <div class="short-links" ng-click="togglePasswordChange()">
                <i class="fa" ng-class="{'cm-down':!showPasswordChange,'cm-up':showPasswordChange}"></i>
            </div>
            <section ng-show="showPasswordChange">
                <hr class="margin-small" />

                <article class="content">
                    <label>{{'ACCOUNT.PLACEHOLDER.OLD_PASSWORD'|cmTranslate}}</label>
                    <div class="cm-input-ctn">
                        <input
                                tabindex="4" data-qa="input-oldPassword"
                                type="password" name="oldPassword" ng-model="account.oldPassword" />
                    </div>
                    <cm-info-bubble class="cm-alert"
                                    ng-show="cmForm.oldPassword.$error.empty || cmForm.oldPassword.$error.invalid">
                        <div ng-show="cmForm.oldPassword.$error.empty" data-qa="form-error-oldPassword-empty">
                            <i class="fa cm-info"></i> {{'ACCOUNT.INFO.INVALID.OLD_PASSWORD'|cmTranslate}}
                        </div>
                        <div ng-show="cmForm.oldPassword.$error.invalid" data-qa="form-error-oldPassword-invalid">
                            <i class="fa cm-info"></i> {{'ACCOUNT.INFO.INVALID.OLD_PASSWORD'|cmTranslate}}
                        </div>
                    </cm-info-bubble>
                </article>

                <hr class="margin-small" />

                <article class="content">
                    <cm-password ng-model="account.password" cm-with-stars="false" cm-tabindex="5"></cm-password>
                </article>
            </section>
        </li>
    </ul>

</form>

<cm-footer cm-always-on-top>
    <button class="cm-btn" ng-click="saveAccount()" data-qa="btn-footer">
        <span ng-show="!showSpinner && !isPristine" data-qa="btn-saveAccount">
            {{'ACCOUNT.FOOTER.SAVE'|cmTranslate}}
            <i class="fa cm-checker"></i>
        </span>
        <span ng-show="isPristine" data-qa="btn-pristineBack">
            {{'ACCOUNT.FOOTER.BACK'|cmTranslate}}
            <i class="fa cm-out"></i>
        </span>
        <cm-loader ng-show="showSpinner" cm-color="ci-color"></cm-loader>
    </button>
</cm-footer>