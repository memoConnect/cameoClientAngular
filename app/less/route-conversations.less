.cm-unread{ color:@cm-border-grey; } /*@cm-warning-color*/

li:first-of-type cm-conversation-tag {
    border-top: solid @cm-border-grey @cm-border-width;
}

cm-conversation-tag{
    display: block;  
    background: @cm-overlay-light;
    color: @cm-dark-grey;
    border-bottom: solid @cm-border-grey @cm-border-width;
    height: @cm-unit + 2*@cm-vertical-padding;
    line-hieght:@cm-unit;
    padding: @cm-vertical-padding 0;
    position:relative;

    > * {
        height: @cm-unit;
        vertical-align:middle;
        padding: 0 @cm-horizontal-padding;
    }

    .details{      
        text-align:left;

        .subject {
            .single-line;
            line-height:0.5*@cm-unit;
            color: @cm-font-color;
            font-weight:bold;
        }

        cm-message{
            .single-line;        
            line-height: 0.5*@cm-unit;
            color: @cm-font-color-light;
            height: 2rem;
        }
    }

    .meta{
        padding-right:@cm-horizontal-padding;

        .top {
            .single-line;        
            font-size: @cm-small-font;
            line-height:0.4*@cm-unit;
            text-align:right;

            .last-updated{
                margin-left: 1em;
            }
        }

        .bottom {
            .single-line;        
            font-size: @cm-base-font;
            line-height: 0.6*@cm-unit;            
            text-align:right;

            > * {
                vertical-align:middle;
            }

            .message-count {
              font-weight:bold;
            }

            cm-recipient-counter{
              font-size:1.8em;
              .background {
                color:@cm-ci-color;
              }
              .foreground {
                color:@cm-white;
              }
            }
        }
    }
}

cm-recipient-counter{
  display: inline-block;
  position:relative;
  line-height:1rem;
  .background {
    color: #000;
    position:relative;
    vertical-align:bottom;
  }
  .foreground {
    color:#fff;
    position:absolute;
    left:0;
    bottom:0;
    right:22%;
    font-size:0.7rem;
    font-style:normal;
    font-weight:bold;
    line-height:1.1rem;
    text-align:center;
    z-index:2;
  }
}

@cm-conversation-control-height:2em;


cm-security-settings {
  display: block;
  background-color: @cm-white;

  .body-group{
    background:@cm-white;
    padding:0.5rem;
    border-bottom:@cm-border-grey @cm-border-width solid;
    width:100%;
  }

  .no-border{
    border: none;
  }

  .no-padding{
    padding:0
  }

  .label-with-checkbox{
    line-height:@cm-unit;
    label {
      padding-left: 0.5rem;
      .w40;
    }
    button {
      i {
        width:@cm-unit;
        height:@cm-unit;
        line-height:@cm-unit;
      }
    }
    .checkbox-of-label{
      .w60;
      .tar;
      .dib;
      padding-right: 0.5rem;
    }
  }

  .label-with-input{
    label {
      padding-left: 0.5rem;
      .w40;
    }
    .cm-form-control{
      .w60;
    }
  }

  .settings-alert{
    padding:@cm-horizontal-padding;
    .tac;
    a{
      white-space: normal;
    }
  }

  &:last-child{
    border-bottom:0;
  }

  .cm-btn{
    color:@cm-ci-color;
    .cm-btn-black;
    .cm-btn-block;
  }

  .cm-form-group{
    padding:0;
  }

  .cm-center{
    .cm-info{
      color:@cm-ci-color;
    }
  }
}

cm-conversation{
  .body-group{
    background-color:@cm-white;
    padding:0.5rem;
  }

  .recipients-counter{
    padding:@cm-horizontal-padding;
  }
  @cm-active-recipient-color:@cm-border-grey;
  .recipient-name{
    color:@cm-active-recipient-color;
    padding:@cm-horizontal-padding;
  }

  .recipients-list{
    position:relative;
    margin-right:@cm-unit;

    .scroller{
      overflow-y:hidden;
      overflow-x:auto;
      height: @cm-unit;
      white-space: nowrap;
      &.show-scrollbar{
        height: @cm-unit+2;
      }
    }
    .add-new-recipients{
      span{
        height:@cm-unit;
        line-height:@cm-unit;
      }
    }
    cm-avatar{
      .with-cursor;
      vertical-align:top;
      margin-right:0.5rem;
      border:@cm-border-width transparent solid;
      padding:@cm-border-width;
      &:last-child{
        margin-right:0;
      }
      &.name-shown{
        border-color:@cm-active-recipient-color;
      }
    }
    .cm-add-button{
      .with-cursor;
      font-size:@cm-mega-font + 1;
      position:absolute;
      right:-(@cm-unit+0.2);
      top:0;
      color:@cm-grey-btn;
      text-align:center;
      i {
        height:@cm-unit;
        width:@cm-unit;
        line-height:@cm-unit;
      }
    }
  }

  .subject{}

  #conversation-top{
    margin-bottom:0.5*@cm-unit;
  }

  cm-message {
    margin: 0.5em 0;
    word-wrap: break-word;
    &.right {
      text-align: right;
    }
    article {
      div.avatar {
        font-size: 1.5em;
        width: 1.5em;
        height: 1.5em;
        margin-right: 0.7rem;
        cm-avatar {
          width: inherit !important;
          height: inherit !important;
        }
      }
      div.message {
        min-height: @cm-unit/2;
        position: relative;
        padding: 0.5em;
        min-width: @cm-message-min-width;
        -webkit-border-radius: @cm-border-radius;
        -moz-border-radius: @cm-border-radius;
        border-radius: @cm-border-radius;
        border: none;
        text-align: left;
        &.left {
          background-color: @cm-msg-bg-color-other;
          max-width: @cm-message-left-max-width;
        }
        &.right {
          background-color: @cm-msg-bg-color-own;
          margin-right: 0.7rem;
          max-width: @cm-message-right-max-width;
        }
      }
      cm-message-assets {
        display: block;
      }
      .text{
        span{
          margin: 0.5rem 0;
        }
        &.own-message{
          span {
            margin: 0;
            margin-bottom: 0.5rem;
          }
        }
      }
      span {
        display: block;
        &.nose {
          position: absolute;
          &.left {
            top: 0.2em;
            left: -0.4em;
            i {
              color: @cm-msg-bg-color-other
            }
          }
          &.right {
            top: 0.5em;
            right: -0.39em;
            i {
              color: @cm-msg-bg-color-own
            }
          }
          i {
            font-size: 1.5em;
          }
        }
      }
      div.author {
        position: absolute;
        top: -0.3rem;
        left: 0;
        margin-left: 0.6rem;
        span {
          display: inline;
          font-size: 0.6em;
          color: @cm-grey;
        }
      }
      div.assets {
        position: absolute;
        bottom: 0.2rem;
        right: 1rem;
        &.green {
          span {
            color: @cm-green;
          }
        }
        span {
          display: inline;
          font-size: @cm-small-font;
          &.date {
            text-align: right;
            overflow: hidden; //@todo tempor√§r
          }
          &.security {
            text-align: right;
          }
          &.envelope {
            text-align: right;
          }
        }
      }
    }
  }
}

div.answer{
  width:@cm-app-width;
  min-height:@cm-footer-height;
  position:fixed;
  bottom:0;
  z-index:2;
  background-color:@cm-white;
  vertical-align:middle;
  margin:0 auto;
  left:0;
  right:0;
  font-size:@cm-unit - 1;

  .wrap{
    position: relative;
  }

  .btns{
    &-left{
      position:absolute;
      bottom:0.3rem;
      left:0;
    }
    &-right{
      position:absolute;
      bottom:0.3rem;
      right:0;
    }
  }
  // btns-left
  cm-files{
    text-align:center;
  }
  // btns-right
  cm-emoji-handler{
    .cm-unit-btn;
  }
  .post-wrap{
    .cm-unit-btn;
    i.cm-post {
      &.is-disabled {
        color:@cm-grey;
      }
    }
  }

  .message{
    // (@cm-unit*3) = fileupload emojis post
    width:@cm-app-width - (@cm-unit*3);
    left:@cm-unit;
    position:relative;
    height:100%;
    bottom:0;
    margin:0;
    text-align:left;
    textarea{
      width:100%;
      border:none !important;
      background:transparent;
      margin-bottom:0.5em;
      padding:2px;
      &[rows='1']{
        margin:1rem 0;
      }
    }
    textarea, .textarea-shadow{
      font-size:@cm-large-font;
    }
    .inputter {
      width:100%;
      position:absolute;
      height:0.3rem;
      bottom:0.3rem;

      border-color: -moz-use-text-color @cm-black @cm-black;
      border-image: none;
      border-right: @cm-border-width solid @cm-black;
      border-left: @cm-border-width solid @cm-black;
      border-style: none solid solid;
      border-width: medium @cm-border-width @cm-border-width;
    }
  }
  div.message.large {
    width:26rem;
    margin-left:0.5rem;
  }
}

div.captcha {
  padding:0 0.5rem;
  cm-captcha {
    display:inline-block;
    width:26rem;
    height:10rem;
  }
  position: relative;
  text-align: left;
  margin-top: 0.5rem;
  button.refresh {
    position: absolute;
    top:4rem;
    right:0.5rem;

    color: @cm-grey;
    font-size: 2.5em;
  }
  p {
    margin:0 0 0.5rem 0;
    text-align: center;
  }
  img{
    width:100%;
  }
}

.webreader-uploading{
  .with-cursor;
  width:100%;
  height:100%;
  position:absolute;
  z-index:1;
  left:0;
  top:0;
}
