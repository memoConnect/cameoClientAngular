cm-modal {
  display: none;
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 99999;
  width: 32rem;
  margin: 0 auto;
  transition: all ease-out;

  &.active {
    display: block;
  }

  .backdrop {
    background-color: @cm-overlay-dark;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1;
  }

  &.nose-top {
    padding-top: 1rem;
  }

  &.nose-bottom {
    padding-bottom: 1rem;
  }

  &.nose-left {
    padding-left: 1rem;
  }

  &.nose-right {
    padding-right: 1rem;
  }

  article {
    z-index: 2;
    position: relative;
    background: #fff;
    border-radius: @cm-border-radius;
    width: 28rem;
    margin: auto;
    margin-top: @cm-header-height;

    header {
      position: relative;

      button.close {
        position: absolute;
        display: block;
        top: 0;
        left: 0;
        font-size: 0.75*@cm-unit;
        color: @cm-black;
        line-height: @cm-unit;
        height: @cm-unit;
        width: @cm-unit;
        /* TODO: compensate bootstrap */
        float: none !important;
        font-weight: normal !important;
        opacity: 1 !important;
        text-shadow: initial !important;
      }

      h2 {
        font-size: @cm-large-font;
        line-height: @cm-unit;
        font-weight: bold;
        vertical-align: middle;
        text-align: center;
        padding: 0;
        margin: 0 @cm-unit;

        &.info {
          color: @cm-font-color;
        }

        &.warn {
          color: @cm-warning-color;
        }
      }
    }

    ng-transclude.content {
      display: block;
      text-align: center;
      padding: 1rem;

      a,
      button {
        display: block;
        line-height: @cm-unit;
        color: @cm-font-color;
        font-size: @cm-large-font;
        text-align: left;
        vertical-align: middle;
        .single-line;

        i {
          color: @cm-font-color;
          width: @cm-unit;
          height: @cm-unit;
          line-height: @cm-unit;
          font-size: 0.75*@cm-unit;
        }
        &.cm-btn-block {
          color: @cm-white;
          i {
            color: @cm-white;
          }
        }
      }

      button {
        text-align: center;
      }

      .modal-row {
        border-top: @cm-border-grey @cm-border-width solid;
        padding: 0.5rem 1.5rem;
        textarea {
          display: block;
          width: 100%;
        }
      }
    }

    footer {
      background-color:@cm-bg-color;
      padding:0;
      font-size:@cm-large-font;
      line-height:@cm-footer-height;

      button, a {
        display:inline-block;
        height:100%;
        text-align:center;
        border-radius: 0;
        background: transparent;
        border:none;
        padding:0;
        .cm-ci-color;
        overflow: hidden;
        text-decoration:none;
        line-height: @cm-footer-height;
      }
    }

    &.cm-modal-plain {}
    &.cm-modal-alert {
      header {
        height: @cm-unit*0.66;
      }
    }
  }

  .nose {
    position: absolute;
    color: #fff;
    font-size: 3rem;

    &.top {
      bottom: 100%;
    }

    &.bottom {
      top: 100%;
    }

    &.left {
      right: 100%;
    }

    &.right {
      left: 100%;
    }

    &.top,
    &.bottom {

      margin: 0 @cm-border-radius;

      &.flip {
        -moz-transform: scaleX(-1);
        -webkit-transform: scaleX(-1);
        -o-transform: scaleX(-1);
        transform: scaleX(-1);
        -ms-filter: fliph; /*IE*/
        filter: fliph; /*IE*/
      }
    }

    &.left,
    &.right {

      margin: @cm-border-radius 0;

      &.flip {
        -moz-transform: scaleY(-1);
        -webkit-transform: scaleY(-1);
        -o-transform: scaleY(-1);
        transform: scaleY(-1);
        -ms-filter: flipv; /*IE*/
        filter: flipv; /*IE*/
      }
    }
  }

  &.with-title {
    .content {
      margin-top: 5em;
      .modal-outer-title {
        text-align: center;
        width: 100%;
        position: absolute;
        top: -1.5em;
        .cm-ci-color;
        font-size: 2em
      }
    }
  }

  &.no-padding {
    .content {
      padding: 0;
    }
  }

  &.webreader{
    font-size:@cm-large-font;
    text-align:center;
    .attention{
      .cm-orange;
    }
    .redirect{
      .cm-grey;
      text-align:center;
      i{
        .cm-grey;
      }
    }
  }
}

cm-modal.modal-notification{
  header {
    height:0 !important;
  }
  .header {
    padding:@cm-vertical-padding @cm-horizontal-padding;
    font-size:@cm-mega-font;
    font-weight:bold;
    .cm-lg-icon{
      font-size:@cm-mega-font + 1;
    }
  }
  .body{
    font-size:@cm-large-font;
  }

  &.modal-type-{
    &success{
      .header{color: @cm-notify-success}
      .body{ i.fa {color: @cm-notify-success} }
    }
    &info{
      .header{color: @cm-notify-info}
      .body{ i.fa {color: @cm-notify-info} }
    }
    &warn{
      .header{color: @cm-notify-warn}
      .body{ i.fa {color: @cm-notify-warn} }
    }
    &error{
      .header{color: @cm-notify-error}
      .body{ i.fa {color: @cm-notify-error} }
    }
  }
}